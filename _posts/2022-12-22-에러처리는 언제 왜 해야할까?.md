---
layout: post
title: 에러처리는 언제 왜 해야할까?
description: about error handling
summary: about error handling
tags: swift
minute: 1
---

에러 처리에 대해 주절 주절 해보려고 합니다. 앱 개발 하다 보면 에러 처리를 할 때가 많습니다. 그렇다면 언제 에러를 처리해야 할까요? 근본적으로 에러 처리는 왜 해야 할까요?

기본적으로 앱의 안정성을 위해 필요합니다. 앱은 loop가 돌면서 사용자의 인터랙션을 받아 적절하게 처리하길 원합니다. 하지만 항상 원하는 결과를 얻을 수 없죠. 흔히 쓰는 예시로 encode decode가 있는데요 원하는 포맷에 맞지 않으면 앱은 적절한 처리를 할 수 없습니다.  

``` swift
public func encode(to encoder: Encoder) throws
public init(from decoder: Decoder) throws
```

처리를 할 수 없다고 앱이 죽어버리면 안되잖아요? 따라서 발생한 에러를 가지고 적절히 처리 해야 합니다. 사실 적절히라 했지만 선택지는 두가지 입니다. 
- 에러를 유저에게 alert과 같은 형태로 알려줄 것이냐
- 에러를 유저에게 알리지 않고 앱이 복구로직이나 로깅같은 형태로 처리 할 것이냐.

모든 에러를 유저에게 보여줄 순 없습니다. 그렇게 된다면 유저는 수많은 alert창을 보게 되겠죠 그것 또한 앱을 정상적으로 사용할 수 없을 것입니다. 그렇다면 어떤 에러를 유저에게 알려 줘야 할까요? 그것은 유저로부터 직접적으로 트리거 된 작업은 유저에게 알려 주어야 합니다.

예를 들어 유저가 파일을 저장 한다고 한다면 앱은 FileManager를 통해 write를 시도 할 것입니다. 하지만 다양한 이유로 파일 쓰기가 실패할 수 있습니다.
대표적으로는 저장공간이 부족할 수 있구요, 여러 시스템 사정이 있을 것입니다. 따라서 write 함수도 try를 붙여 호출하게 되겠죠. 이럴때 만약 try? 같은 방법으로 에러를 무시하게 된다면 어떻게 될까요? 사용자는 내가 요청한 파일이 저장이 된 것인지 안된 것인지 알 수가 없습니다. 답답해지는 것이죠. 이럴땐 에러를 사용자에게 설명해주며 알려주어야 합니다. [localized Error](https://developer.apple.com/documentation/foundation/localizederror)를 사용해서 미리 에러를 정의 해두어 설명해주는 것이 필요합니다.

또한 에러처리와 함께 앱내에 log를 남기는 것도 좋은 방법입니다. 결국 에러가 발생했다는 것은 앱이 의도와 다르게 동작했다는 것이고 사용자의 불만을 초래할 수 있기 때문에 앱의 문제를 CS로 인입되는 것보다 먼저 개발에서 알아 차릴 수 있습니다. 그리고 에러 메세지로는 범용적인 메세지보다는 구체적인 메세지가 좋습니다. 예를 들어 서버와의 연결이 원할하지 않습니다. 물론 맞는 말일 수 있지만 조금 더 구체적으로 `어떠한 작업을 하는데 필요한 겂이 없습니다.`와 같은 메세지가 조금 더 사용자에게 많은 정보를 줄 수 있을 것입니다. 즉 그래야 사용자도 개발자도 어디서 에러가 발생했는지 알기 명확해집니다.